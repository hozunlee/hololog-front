<script>
	import { page } from '$app/stores'
	import Cake from '$lib/components/Cake.svelte'
	import Card from '$lib/components/Card.svelte'
	import { onMount } from 'svelte'

	export let data
	let arrayLength = data.cakes.length

	/**
	 *
	 * @param arrayLength {number}
	 */
	const ëœë¤ìˆ«ì = (arrayLength) => {
		return Math.floor(Math.random() * arrayLength)
	}

	const ë©”ì¸ë¬¸ì¥ë§Œë“¤ê¸° = () => {
		ë©”ì¸ë¬¸ì¥ = data.cakes[ëœë¤ìˆ«ì(arrayLength)]
	}
	/**
	 *
	 * @typedef {Object} cakeItem
	 * @property {number} id
	 * @property {string} item ë¬¸ì¥ ì»¨í…ì¸ 
	 * @property {string} author ì‘ê°€
	 * @property {string} from ì±…ì´ë¦„
	 * @property {string} [speaker] ì±… ì•ˆì—ì„œ ë§í•œ ì‚¬ëŒì´ ë‹¤ë¥¼ ê²½ìš°
	 */

	/** @type {cakeItem} */
	let ë©”ì¸ë¬¸ì¥

	onMount(() => {
		// content here
		ë©”ì¸ë¬¸ì¥ = data.cakes[ëœë¤ìˆ«ì(data.cakes.length)]
	})

	//
</script>

<svelte:head>
	<title>Hololog</title>
	<meta name="description" content="holo <ë¹„êµí•  ìˆ˜ ì—†ëŠ” tech ê¸°ë¡> log" />

	<meta property="og:title" content="Hololog" />
	<meta property="og:description" content="holo <ë¹„êµí•  ìˆ˜ ì—†ëŠ” tech ê¸°ë¡> log" />
	<meta
		property="og:image"
		content="https://mjxiofcpqnyfnskvoxut.supabase.co/storage/v1/object/public/strapi-uploads/ogimage_1693477365283.svg"
	/>
	<meta property="og:url" content={$page.url.href} />
	<meta property="og:type" content="article" />
	<meta property="og:site_name" content="Hololog : ë¹„êµí•  ìˆ˜ ì—†ëŠ” Tech ê¸°ë¡" />
</svelte:head>

{#if ë©”ì¸ë¬¸ì¥}
	<div class="ë©”ì¸ë¬¸ì¥ë°•ìŠ¤">
		<button on:click={ë©”ì¸ë¬¸ì¥ë§Œë“¤ê¸°}>new ğŸ§€</button>
		<Cake item={ë©”ì¸ë¬¸ì¥} />
		<!-- <div class="button">
				<Button>new</Button>
			</div> -->
	</div>
{/if}
<div class="êµ¬ë¶„ì„  div-transparent" />
<section>
	<!-- <span class="welcome">
			<picture>
				<source srcset={welcome} type="image/webp" />
				<img src={welcome_fallback} alt="Welcome" />
			</picture>
		</span> -->

	{#each data.posts as post}
		<!-- content here -->
		<Card card={post} />
	{/each}
</section>

<style>
	section {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		flex: 0.6;
	}

	.ë©”ì¸ë¬¸ì¥ë°•ìŠ¤ {
		margin-top: 5rem;
		text-align: center;
		line-height: 1.3;
		display: flex;
		justify-content: center;
		align-items: center;
		flex-direction: column;
	}

	.ë©”ì¸ë¬¸ì¥ë°•ìŠ¤ > button {
		border: none;
		color: gray;
		font-size: small;
		cursor: pointer;
	}

	/* .button {
		display: inline-block;
		width: 300px;
		margin: 40px 0 50px 0;
	} */
</style>
